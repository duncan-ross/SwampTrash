{"ast":null,"code":"var _jsxFileName = \"/Users/duncanross/Desktop/SwampTrash/src/converter.js\";\nimport React from 'react';\nimport base64 from 'react-native-base64';\n\nvar axios = require('axios');\n\nvar Converter = function Converter(props) {\n  // props.setFile('.../public/images/HTB1Y.V6aIrrK1Rjy1zeq6xalFXaA.jpg');\n  var file = 'https://sc02.alicdn.com/kf/HTB1Y.V6aIrrK1Rjy1zeq6xalFXaA/232900318/HTB1Y.V6aIrrK1Rjy1zeq6xalFXaA.jpg';\n  var result, confidence;\n  var outputJSON;\n\n  var base64_encode = function base64_encode(file) {\n    return base64.encode(file); // // read binary data\n    // var bitmap = fs.readFileSync(file);\n    // // convert binary data to base64 encoded string\n    // return new Buffer(bitmap).toString('base64');\n  };\n\n  axios.defaults.headers.common['Content-Type'] = \"application/json\";\n  axios.defaults.headers.common['Authorization'] = \"Bearer ya29.c.Ko8BvweiEswHjnW0B4ym9z1sfuQ6qpa3R8GYdpxYa67pHOhFULl6VmUVVS4N15j0QcA4wKULUpGbb2rng50AA53VEJVl33P2tBzu4HYFce9IwTSMfljBzLNsi8Qem87KjoPVaknOCt8sR_w7VwnEdkAggHnEb32zILlZ7qrueDa1M-L6bngebz_PPg83UWMgyvg\"\n  /* Copy token key here */\n  ; // function to encode file data to base64 encoded string\n\n  var base = base64_encode(file);\n  axios.post(\"https://automl.googleapis.com/v1beta1/projects/766644774605/locations/us-central1/models/ICN5802549470285529088:predict\", {\n    \"payload\": {\n      \"image\": {\n        \"imageBytes\": base\n      }\n    }\n  }).then(function (res) {\n    if (Object.keys(res.data).length == 0) {\n      result = 'trash';\n      confidence = 99;\n    } else {\n      result = res.data.payload[0].displayName;\n      confidence = res.data.payload[0].classification.score;\n      confidence = confidence * 100;\n      confidence = Math.round(confidence);\n    }\n\n    var temp = {\n      \"result\": result,\n      \"confidence\": confidence\n    };\n    temp = JSON.stringify(temp);\n    outputJSON = JSON.parse(temp);\n    console.log(outputJSON); //     fs.writeFile('output.json', JSON.stringify(outputJSON), 'utf8', (err, data) => {\n    //         if (err) console.log(err);\n    //         else console.log('written');\n    // });\n  }).catch(function (err) {\n    console.log(err);\n  });\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  });\n};\n\nexport default Converter;","map":{"version":3,"sources":["/Users/duncanross/Desktop/SwampTrash/src/converter.js"],"names":["React","base64","axios","require","Converter","props","file","result","confidence","outputJSON","base64_encode","encode","defaults","headers","common","base","post","then","res","Object","keys","data","length","payload","displayName","classification","score","Math","round","temp","JSON","stringify","parse","console","log","catch","err"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;;AACA,IAAIC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAnB;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,KAAD,EAAW;AAEzB;AACA,MAAMC,IAAI,GAAI,sGAAd;AAEA,MAAIC,MAAJ,EAAYC,UAAZ;AACA,MAAIC,UAAJ;;AAEA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACJ,IAAD,EAAS;AAE3B,WAAOL,MAAM,CAACU,MAAP,CAAcL,IAAd,CAAP,CAF2B,CAI3B;AACA;AACA;AACA;AACH,GARD;;AAUIJ,EAAAA,KAAK,CAACU,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,cAA9B,IAAgD,kBAAhD;AACAZ,EAAAA,KAAK,CAACU,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD;AAAmN;AAApQ,GAnBqB,CAoBrB;;AAEA,MAAIC,IAAI,GAAGL,aAAa,CAACJ,IAAD,CAAxB;AACAJ,EAAAA,KAAK,CAACc,IAAN,CAAW,yHAAX,EACI;AACI,eAAW;AACP,eAAS;AACL,sBAAcD;AADT;AADF;AADf,GADJ,EAOOE,IAPP,CAOY,UAASC,GAAT,EAAa;AAEjB,QAAIC,MAAM,CAACC,IAAP,CAAYF,GAAG,CAACG,IAAhB,EAAsBC,MAAtB,IAAgC,CAApC,EAAsC;AAClCf,MAAAA,MAAM,GAAG,OAAT;AACAC,MAAAA,UAAU,GAAG,EAAb;AACH,KAHD,MAGM;AACFD,MAAAA,MAAM,GAAGW,GAAG,CAACG,IAAJ,CAASE,OAAT,CAAiB,CAAjB,EAAoBC,WAA7B;AACAhB,MAAAA,UAAU,GAAGU,GAAG,CAACG,IAAJ,CAASE,OAAT,CAAiB,CAAjB,EAAoBE,cAApB,CAAmCC,KAAhD;AACAlB,MAAAA,UAAU,GAAGA,UAAU,GAAG,GAA1B;AACAA,MAAAA,UAAU,GAAGmB,IAAI,CAACC,KAAL,CAAWpB,UAAX,CAAb;AACH;;AAED,QAAIqB,IAAI,GAAG;AACP,gBAAWtB,MADJ;AAEP,oBAAeC;AAFR,KAAX;AAKAqB,IAAAA,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeF,IAAf,CAAP;AAEApB,IAAAA,UAAU,GAAGqB,IAAI,CAACE,KAAL,CAAWH,IAAX,CAAb;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYzB,UAAZ,EApBiB,CAqBrB;AACA;AACA;AACA;AACH,GAhCD,EAgCG0B,KAhCH,CAgCS,UAASC,GAAT,EAAc;AACnBH,IAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACH,GAlCD;AAqCJ,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAMH,CAlED;;AAmEA,eAAehC,SAAf","sourcesContent":["import React from 'react';\nimport base64 from 'react-native-base64'\nvar axios = require('axios');\n\nconst Converter = (props) => {\n\n    // props.setFile('.../public/images/HTB1Y.V6aIrrK1Rjy1zeq6xalFXaA.jpg');\n    const file =  'https://sc02.alicdn.com/kf/HTB1Y.V6aIrrK1Rjy1zeq6xalFXaA/232900318/HTB1Y.V6aIrrK1Rjy1zeq6xalFXaA.jpg'\n\n    let result, confidence;\n    let outputJSON;\n\n    const base64_encode = (file) =>{\n\n        return base64.encode(file);\n\n        // // read binary data\n        // var bitmap = fs.readFileSync(file);\n        // // convert binary data to base64 encoded string\n        // return new Buffer(bitmap).toString('base64');\n    }\n\n        axios.defaults.headers.common['Content-Type'] = \"application/json\";\n        axios.defaults.headers.common['Authorization'] = \"Bearer ya29.c.Ko8BvweiEswHjnW0B4ym9z1sfuQ6qpa3R8GYdpxYa67pHOhFULl6VmUVVS4N15j0QcA4wKULUpGbb2rng50AA53VEJVl33P2tBzu4HYFce9IwTSMfljBzLNsi8Qem87KjoPVaknOCt8sR_w7VwnEdkAggHnEb32zILlZ7qrueDa1M-L6bngebz_PPg83UWMgyvg\"/* Copy token key here */;\n        // function to encode file data to base64 encoded string\n    \n        var base = base64_encode(file);\n        axios.post(\"https://automl.googleapis.com/v1beta1/projects/766644774605/locations/us-central1/models/ICN5802549470285529088:predict\",\n            {\n                \"payload\": {\n                    \"image\": {\n                        \"imageBytes\": base\n                    }\n                }\n            }).then(function(res){\n    \n                if (Object.keys(res.data).length == 0){\n                    result = 'trash'\n                    confidence = 99;\n                } else{\n                    result = res.data.payload[0].displayName;\n                    confidence = res.data.payload[0].classification.score;\n                    confidence = confidence * 100;\n                    confidence = Math.round(confidence);\n                }\n    \n                let temp = {\n                    \"result\" : result,\n                    \"confidence\" : confidence\n                };\n    \n                temp = JSON.stringify(temp);\n    \n                outputJSON = JSON.parse(temp);\n                console.log(outputJSON);\n            //     fs.writeFile('output.json', JSON.stringify(outputJSON), 'utf8', (err, data) => {\n            //         if (err) console.log(err);\n            //         else console.log('written');\n            // });\n        }).catch(function(err) {\n            console.log(err);\n        });\n    \n\n    return (\n        <div>\n            \n        </div>\n    );\n\n};\nexport default Converter;"]},"metadata":{},"sourceType":"module"}